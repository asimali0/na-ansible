---
  - name: Cisco CSRv Config test
    hosts: csrv1


    vars_prompt:
      - name: "mgmt_username"
        prompt: "Username"
        private: no
      - name: "mgmt_password"
        prompt: "Password"

    tasks:

      - name: SYS | Define provider
        set_fact:
          provider:
            host: "{{ inventory_hostname }}"
            username: "{{ mgmt_username }}"
            password: "{{ mgmt_password }}"

      - name: IOS | Show clock
        ios_command: 
          provider: "{{ provider }}"
          commands:
            - show clock
          register: clock
          # authorize: yes
          # auth_pass: cisco
      
      - debug: msg="{{ clock.stdout }}"

    connection: local 
    gather_facts: no 
